# Деревья в веб-мире, зачем они нужны

## DOM

- **Document Object Model, DOM** - это программный интерфейс для *HTML* и *XML* документов, представляет документ в виде иерархической структуры узлов (*Node*)

- в **DOM** есть две части - объектное представление документа HTML и **API** для управления этим объектом

- посредством *API*  **DOM** предоставляет программистам доступ к с своей структуре, разрешая:
    - изменять ее, 
    - добавлять и удалять элементы структуры
    - обновлять содержимое документа динамически,
    - добавлять обработчики событий к элементам документа, что позволяет реагировать на действия пользователя, такие как клики, наведение курсора и т.д.

- он не является 100%-м отображением исходного *HTML*-документа, т.к.
  - браузеры могут сами исправлять некоторые ошибки разметки
  - программные изменения DOM никак не влияют на исходный документ, он остается неизменным

- включает в себя скрытые элементы (*display="none"*) и не включает псевдоэлементы (*::after, ::before*)

- является стандартом W3C и поддерживается всеми современными браузерами.

## Типы узлов DOM

- у узлов *DOM* имеется свойство, указывающее на их тип (**Node.nodeType**):

  1. Node.**ELEMENT_NODE**  \- узел элемента, он обязательно соответствует какому-то **тэгу** *HTML*-документа
  2. Node.ATTRIBUTE_NODE\* \- атрибут элемента
  3. Node.TEXT_NODE - текст элемента 
  4. Node.CDATA_SECTION_NODE - раздел CDATA, который может использоваться в XML
  5. Node.ENTITY_REFERENCE_NODE\*
  6. Node.ENTITY_NODE\* 
  7. Node.PROCESSING_INSTRUCTION_NODE - инструкция по обработке XML-документа, напр. декларация *<?xml-stylesheet ... ?>*
  8. Node.COMMENT_NODE - узел, построенный для HTML-комментария (или XML-комментария)
  9. Node.**DOCUMENT_NODE** \- **корневой узел** дерева *DOM*, соответствующее объекту *document*
  10. Node.DOCUMENT_TYPE_NODE - узел, содержащий тип документа, например, декларация <!DOCTYPE html> для HTML5 документов
  11. Node.DOCUMENT_FRAGMENT_NODE - фрагмент документа, список смежных узлов и их потомков, но без общего родительского узла
  12. Node.NOTATION_NODE\*

  \* \- устаревшие


## CSSOM-дерево

\- это объект, представляющий стили, связанные с DOM
- он выглядит так же, как DOM, но с соответствующими стилями для каждого узла

- в отличии от HTML, CSS не может быть использован по частям в силу своей каскадной природы, поэтому CSSOM-дерево должно быть постороено полностью, прежде чем стили могут быть применены к элементам DOM

## Render-дерево

\- это совокупность DOM и CSSOM - оно включает в себя только те элементы, которые будут отображены на странице, 
   элементы со стилем dislay="none" отсутствуют в **Render-дереве**


## Shadow DOM

- **Shadow DOM* (теневое дерево объектов документа) - это технология, которая позволяет создавать **изолированные** деревья DOM внутри основного дерева DOM веб-страницы.

- он позволяет создавать изолированные компоненты с их собственными деревьями DOM, стилями и логикой, которые могут быть вложены в основное дерево DOM без взаимного влияния на другие элементы на странице

- он может быть скрыт от внешнего мира и недоступен для стилизации или изменений извне

- теневой DOM не использует глобальные стили документа

- он всегда присоединен к элементу в обычном DOM, без базовых элементов DOM, теневой DOM не существует

## Виртуальный DOM 

- это **абстрактное** представление структуры веб-страницы, существующее в памяти программы (обычно на JS), копия реального DOM
- он служит промежуточным этапом для оптимизации процесса изменения интерфейса в React и др.библиотеках, сокращая нагрузку на реальный DOM

[Еще про деревья...](https://alishoff.com/blog/256)
